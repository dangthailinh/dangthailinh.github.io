<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mô phỏng Hệ Mặt Trời</title>
  <style>
    :root{
      --bg: radial-gradient(circle at 20% 20%, #0b1630, #000814 40%);
      --glass: rgba(255,255,255,0.06);
      --accent: #ffd166;
      --ui-h: 64px;
    }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#e6eef8;background:var(--bg);overflow:hidden}
    /* Header (mobile-friendly) */
    header{height:var(--ui-h);display:flex;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;backdrop-filter: blur(6px);background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));position:relative;z-index:20}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#ffd166,#f07a1a);display:flex;align-items:center;justify-content:center;font-weight:700;color:#1b1b1b}
    h1{font-size:16px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    button, input[type=range], select{background:var(--glass);color:inherit;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:10px}
    button{cursor:pointer}

    /* Main area */
    .stage{position:absolute;inset:var(--ui-h) 0 0 0;display:flex;align-items:center;justify-content:center}
    .space{position:relative;width:min(1200px,95vw);height:min(700px,75vh);border-radius:12px;overflow:hidden;box-shadow:0 8px 40px rgba(0,0,0,0.6), inset 0 0 120px rgba(255,255,255,0.01);background:transparent}

    /* Sun */
    .sun{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:120px;height:120px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff6c2,#ffd166 25%,#ff9800 60%,#ff6b00);box-shadow:0 0 60px 20px rgba(255,147,38,0.15),0 0 140px 40px rgba(255,170,60,0.06);display:flex;align-items:center;justify-content:center}
    .sun::after{content:'';position:absolute;inset:-8px;border-radius:50%;filter: blur(20px);}

    /* Orbit container */
    .orbit{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);border-radius:50%;pointer-events:none}
    .orbit.ring{border:1px dashed rgba(255,255,255,0.04)}
    .planet{position:absolute;top:50%;left:50%;transform-origin:-50% 0;pointer-events:auto}
    .planet .dot{border-radius:50%;display:block}

    /* Size presets */
    .p-mercury .dot{width:10px;height:10px;background:#9b9b9b}
    .p-venus .dot{width:18px;height:18px;background:#e6cf7a}
    .p-earth .dot{width:20px;height:20px;background:linear-gradient(180deg,#4aa3ff,#1b7fff)}
    .p-mars .dot{width:16px;height:16px;background:#d65a3f}
    .p-jupiter .dot{width:44px;height:44px;background:linear-gradient(180deg,#d9b58f,#b77a45)}
    .p-saturn .dot{width:36px;height:36px;background:linear-gradient(180deg,#f0d9b8,#c99a63)}
    .p-uranus .dot{width:28px;height:28px;background:#88e0ff}
    .p-neptune .dot{width:28px;height:28px;background:#4a6fff}

    /* Saturn ring */
    .p-saturn .dot{position:relative;z-index:2}
    .p-saturn .ring{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotateX(60deg);width:80px;height:80px;border-radius:50%;border:6px solid rgba(255,255,255,0.14);box-shadow:inset 0 2px 6px rgba(0,0,0,0.4)}

    /* Info panel */
    .info{position:fixed;right:16px;bottom:16px;width:260px;max-width:40vw;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);backdrop-filter: blur(6px)}
    .info h2{margin:8px 0 6px;font-size:14px}
    .info p{margin:0;font-size:13px;color:#cbd8ff}

    /* Footer small controls for mobile */
    .small{display:none}

    /* Responsive tweaks */
    @media (max-width:700px){
      .space{height:65vh}
      .info{width:92%;left:50%;transform:translateX(-50%);right:auto;bottom:12px}
      .small{display:flex;gap:8px}
      header{padding:8px}
      h1{font-size:14px}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">☼</div>
      <div>
        <h1>Mô phỏng Hệ Mặt Trời</h1>
        <div style="font-size:12px;color:rgba(230,238,248,0.7)">Tương tác: nhấn để xem thông tin</div>
        <a href="khoa-hoc.html" class="back-btn">← Quay lại</a>
      </div>
    </div>

    <div class="controls">
      <button id="playBtn">Tạm dừng</button>
      <label style="font-size:12px">Tốc độ</label>
      <input id="speed" type="range" min="0.1" max="3" step="0.05" value="1">
      <select id="scaleSelect" title="Tỉ lệ khoảng cách">
        <option value="auto">Tỉ lệ: Tự động</option>
        <option value="real">Tỉ lệ: Gần thực tế</option>
        <option value="compact">Tỉ lệ: Thu gọn</option>
      </select>
    </div>
  </header>

  <main class="stage">
    <div class="space" id="space" aria-label="Mô phỏng hệ mặt trời">
      <div class="sun" title="Mặt Trời"></div>
      <!-- Orbits and planets will be injected by JS -->
    </div>
  </main>

  <aside class="info" id="info">
    <h2>Thông tin</h2>
    <p id="infoText">Bấm vào một hành tinh để xem chi tiết.</p>
    <small style="display:block;margin-top:8px;color:#8fa3cc">Tạo bởi Linh</small>
  </aside>

  <template id="planet-template">
    <div class="orbit ring" data-orbit></div>
    <div class="planet" data-planet>
      <div class="dot"></div>
    </div>
  </template>

  <script>
    // Planet data (simplified). Distances in AU for scaling; orbitalPeriod in Earth days
    const planets = [
      {name:'Mercury', au:0.39, period:88, class:'p-mercury', desc:'Sao Thủy là hành tinh gần Mặt Trời nhất trong Hệ Mặt Trời và cũng là hành tinh nhỏ nhất về kích thước cũng như khối lượng trong số tám hành tinh. Với bán kính xích đạo khoảng 2.440 km (chỉ bằng khoảng 38% bán kính Trái Đất) và khối lượng chỉ bằng 5,5% khối lượng Trái Đất, Sao Thủy có kích thước khiêm tốn nhưng lại sở hữu khối lượng riêng rất cao — khoảng 5,43 g/cm³, đứng thứ hai trong Hệ Mặt Trời sau Trái Đất. Điều này cho thấy lõi của Sao Thủy giàu sắt và chiếm phần lớn thể tích hành tinh. Sao Thủy quay quanh Mặt Trời ở khoảng cách trung bình khoảng 57,9 triệu km (tức 0,387 đơn vị thiên văn), với thời gian một năm (chu kỳ quỹ đạo) chỉ khoảng **88 ngày Trái Đất**. Tuy nhiên, một ngày trên Sao Thủy (từ bình minh đến bình minh tiếp theo) kéo dài tới **176 ngày Trái Đất** do sự kết hợp giữa chu kỳ tự quay chậm (58,6 ngày) và quỹ đạo nhanh quanh Mặt Trời. Bề mặt Sao Thủy đầy hố va chạm, giống như Mặt Trăng, và không có khí quyển đáng kể để điều hòa nhiệt độ, dẫn đến sự chênh lệch nhiệt độ cực lớn: ban ngày có thể lên tới **430°C**, trong khi ban đêm xuống thấp đến **-180°C**.'},
      {name:'Venus', au:0.72, period:225, class:'p-venus', desc:'Sao Kim (Venus) là hành tinh thứ hai tính từ Mặt Trời và là hành tinh gần Trái Đất nhất về khoảng cách. Với kích thước và khối lượng tương đối giống Trái Đất — bán kính khoảng **6.052 km** (khoảng 95% bán kính Trái Đất) và khối lượng bằng **81,5%** khối lượng Trái Đất — Sao Kim thường được gọi là "hành tinh chị em" của Trái Đất. Tuy nhiên, điều kiện bề mặt của nó lại hoàn toàn khắc nghiệt. Sao Kim có bầu khí quyển dày đặc, chủ yếu là **carbon dioxide (CO₂)**, gây ra hiệu ứng nhà kính cực mạnh, khiến nhiệt độ bề mặt trung bình lên tới **khoảng 467°C**, nóng hơn cả Sao Thủy dù ở xa Mặt Trời hơn. Áp suất khí quyển trên bề mặt Sao Kim gấp **92 lần** áp suất khí quyển Trái Đất — tương đương áp suất ở độ sâu gần 1 km dưới đại dương của Trái Đất. Một ngày trên Sao Kim (thời gian tự quay quanh trục) kéo dài **243 ngày Trái Đất**, dài hơn cả một năm của nó (225 ngày Trái Đất), và đặc biệt, Sao Kim **tự quay ngược chiều** so với hầu hết các hành tinh khác trong Hệ Mặt Trời. Bề mặt hành tinh này bị che khuất bởi những đám mây axit sulfuric dày đặc, nên không thể quan sát trực tiếp từ không gian bằng ánh sáng nhìn thấy. Dù là một trong những vật thể sáng nhất trên bầu trời đêm (chỉ sau Mặt Trăng), Sao Kim lại là một môi trường cực kỳ khắc nghiệt, không phù hợp cho sự sống như chúng ta biết.'},
      {name:'Earth', au:1, period:365, class:'p-earth', desc:'Trái Đất là hành tinh thứ ba tính từ Mặt Trời và là nơi duy nhất trong vũ trụ được biết đến có sự sống. Với bán kính xích đạo khoảng **6.371 km** và khối lượng vào khoảng **5,97 × 10²⁴ kg**, Trái Đất là hành tinh lớn nhất trong số bốn hành tinh đất đá của Hệ Mặt Trời (Sao Thủy, Sao Kim, Trái Đất và Sao Hỏa). Hành tinh của chúng ta có một bầu khí quyển giàu **nitơ (78%)** và **oxy (21%)**, rất phù hợp để duy trì sự sống. Khoảng **71%** bề mặt Trái Đất được bao phủ bởi nước — chủ yếu là các đại dương — khiến nó còn được gọi là "hành tinh xanh". Trái Đất quay quanh Mặt Trời ở khoảng cách trung bình **149,6 triệu km** (tức **1 đơn vị thiên văn – AU**), với một năm kéo dài **365,25 ngày**. Hành tinh này tự quay quanh trục nghiêng khoảng **23,5 độ**, tạo ra hiện tượng **bốn mùa** khi quay quanh Mặt Trời. Một ngày trên Trái Đất kéo dài **24 giờ**, và nhờ từ trường mạnh tạo bởi lõi sắt-niken nóng chảy, Trái Đất được bảo vệ khỏi bức xạ có hại từ gió Mặt Trời. Ngoài ra, Trái Đất có **một vệ tinh tự nhiên duy nhất** là **Mặt Trăng**, đóng vai trò quan trọng trong việc ổn định trục quay và gây ra hiện tượng thủy triều. Nhờ sự kết hợp độc đáo giữa nước lỏng, khí quyển ổn định, nhiệt độ phù hợp và nguồn năng lượng từ Mặt Trời, Trái Đất trở thành cái nôi cho sự sống phát triển và đa dạng hóa trong hàng tỷ năm qua.'},
      {name:'Mars', au:1.52, period:687, class:'p-mars', desc:'Sao Hỏa (Mars) là hành tinh thứ tư tính từ Mặt Trời và được biết đến với cái tên "Hành tinh Đỏ" do bề mặt của nó có màu đỏ đặc trưng, chủ yếu là do hàm lượng cao của oxit sắt (gỉ sắt). Với bán kính xích đạo khoảng **3.390 km** (khoảng 53% bán kính Trái Đất) và khối lượng chỉ bằng **10,7%** khối lượng Trái Đất, Sao Hỏa là hành tinh nhỏ thứ hai trong số các hành tinh đất đá của Hệ Mặt Trời. Bề mặt của Sao Hỏa có nhiều đặc điểm địa chất đa dạng, bao gồm những ngọn núi lửa khổng lồ như **Olympus Mons** — ngọn núi lửa cao nhất trong Hệ Mặt Trời với chiều cao khoảng **22 km** — và các hẻm núi sâu như **Valles Marineris**, dài hơn **4.000 km** và sâu tới **7 km**. Sao Hỏa có hai vệ tinh nhỏ là **Phobos** và **Deimos**, được cho là những tiểu hành tinh bị bắt giữ bởi lực hấp dẫn của Sao Hỏa. Hành tinh này quay quanh Mặt Trời ở khoảng cách trung bình khoảng **227,9 triệu km** (tức **1,52 AU**), với một năm kéo dài khoảng **687 ngày Trái Đất**.'},
      {name:'Jupiter', au:5.2, period:4333, class:'p-jupiter', desc:'Sao Mộc là hành tinh lớn nhất Hệ Mặt Trời, thuộc nhóm khí khổng lồ, chủ yếu cấu tạo từ hydro và heli. Nó có khối lượng gấp 318 lần Trái Đất, đường kính gấp 11 lần, nhưng không có bề mặt rắn. Sao Mộc quay rất nhanh (1 ngày ≈ 10 giờ) và nổi bật với **Vết đỏ Lớn** — một cơn bão khổng lồ tồn tại hàng thế kỷ. Hành tinh này có **95 vệ tinh đã biết**, trong đó 4 vệ tinh lớn (Io, Europa, Ganymede, Callisto) do Galileo phát hiện. Sao Mộc cũng có từ trường mạnh nhất và một hệ thống vành đai mờ.'},
      {name:'Saturn', au:9.58, period:10759, class:'p-saturn', desc:'Sao Thổ là hành tinh khí khổng lồ lớn thứ hai trong Hệ Mặt Trời, nổi bật với **hệ vành đai sáng** làm từ băng và đá. Nó có khối lượng bằng 95 lần Trái Đất, đường kính gấp 9,5 lần, nhưng **nhẹ hơn nước** về khối lượng riêng. Sao Thổ có **146 vệ tinh**, trong đó **Titan** là lớn nhất và có khí quyển dày. Hành tinh này không có bề mặt rắn và quay rất nhanh (1 ngày ≈ 10,7 giờ).'},
      {name:'Uranus', au:19.2, period:30687, class:'p-uranus', desc:'Sao Thiên Vương là hành tinh băng lớn, có màu xanh lục do methane và **tự quay nghiêng gần 98°** — như thể "lăn" quanh Mặt Trời. Nó không có bề mặt rắn, có **27 vệ tinh** và một hệ **vành đai mờ**. Một ngày dài 17 giờ, một năm dài 84 năm Trái Đất.'},
      {name:'Neptune', au:30.05, period:60190, class:'p-neptune', desc:'Sao Hải Vương là hành tinh xa Mặt Trời nhất trong Hệ Mặt Trời, thuộc nhóm hành tinh băng. Nó có màu **xanh lam đậm** do methane trong khí quyển. Sao Hải Vương **không có bề mặt rắn**, cấu tạo chủ yếu từ nước, amoniac và methane băng bao quanh lõi đá. Hành tinh này có **14 vệ tinh đã biết**, trong đó **Triton** là lớn nhất và có quỹ đạo ngược chiều. Sao Hải Vương cũng sở hữu **gió mạnh nhất Hệ Mặt Trời**, với tốc độ lên tới **2.100 km/h**. Một ngày dài khoảng **16 giờ**, một năm dài **165 năm Trái Đất**.'}
    ];

    const space = document.getElementById('space');
    const template = document.getElementById('planet-template');
    const infoText = document.getElementById('infoText');
    const playBtn = document.getElementById('playBtn');
    const speedInput = document.getElementById('speed');
    const scaleSelect = document.getElementById('scaleSelect');

    let running = true;
    let simSpeed = parseFloat(speedInput.value); // multiplier
    let scaleMode = 'auto';

    playBtn.addEventListener('click', ()=>{running = !running; playBtn.textContent = running ? 'Tạm dừng' : 'Chạy';});
    speedInput.addEventListener('input', ()=> simSpeed = parseFloat(speedInput.value));
    scaleSelect.addEventListener('change', ()=>{scaleMode = scaleSelect.value; layoutOrbits();});

    // Will hold DOM refs and dynamic properties
    const items = [];

    function createPlanet(p, index){
      const clone = template.content.cloneNode(true);
      const orbit = clone.querySelector('[data-orbit]');
      const planet = clone.querySelector('[data-planet]');
      orbit.classList.add('orbit-'+index);
      planet.classList.add(p.class);
      planet.setAttribute('data-index', index);
      planet.title = p.name;

      // add inner ring for Saturn
      if(p.name === 'Saturn'){
        const r = document.createElement('div'); r.className='ring'; planet.appendChild(r);
      }

      space.appendChild(orbit);
      space.appendChild(planet);

      planet.querySelector('.dot').addEventListener('click', (e)=>{
        e.stopPropagation();
        showInfo(p);
      });

      items.push({p, orbit, planet, angle: Math.random()*Math.PI*2});
    }

    function showInfo(p){
      infoText.innerHTML = `<strong>${p.name}</strong><br>${p.desc}<br><small>Quỹ đạo: ${p.au} AU • Chu kỳ: ${p.period} ngày</small>`;
    }

    // Layout orbits based on container size and scale mode
    function layoutOrbits(){
      const w = space.clientWidth; const h = space.clientHeight; const maxRadius = Math.min(w,h)/2 - 60; // leave room

      // compute AU scaling
      const maxAU = Math.max(...planets.map(x=>x.au));
      let scale;
      if(scaleMode === 'real'){
        // map 30 AU to maxRadius
        scale = maxRadius / 30;
      } else if(scaleMode === 'compact'){
        scale = maxRadius / (planets.length + 1);
      } else { // auto: nonlinear mapping to keep inner planets visible
        // use sqrt mapping to compress large distances
        scale = maxRadius / Math.sqrt(maxAU);
      }

      items.forEach(item=>{
        const r = (scaleMode === 'real') ? item.p.au*scale : Math.sqrt(item.p.au)*scale;
        const size = Math.max( (item.p.class.includes('jupiter')?44: (item.p.au<1?14: Math.min(44, 12 + item.p.au*2))) , 8);
        // set orbit
        item.orbit.style.width = item.orbit.style.height = (r*2) + 'px';
        item.orbit.style.marginLeft = item.orbit.style.marginTop = (-r) + 'px';
        item.orbit.style.zIndex = 1;
        // set planet position: place dot on rightmost point; transform-origin makes rotation work
        item.planet.style.marginLeft = (r) + 'px';
        item.planet.style.zIndex = 2 + Math.round(item.p.au);
      });
    }

    // animation loop
    let last = performance.now();
    function loop(now){
      const dt = (now - last)/1000; last = now;
      if(running){
        items.forEach(item=>{
          // angular velocity: 2pi / period (scaled) -> multiply by simSpeed and compress factor to be visible
          const speed = (2*Math.PI / (item.p.period)) * 60 * simSpeed; // 60 -> accelerate for human-scale
          item.angle += speed * dt;
          const r = item.planet.style.marginLeft.replace('px','')*1;
          const x = Math.cos(item.angle) * r;
          const y = Math.sin(item.angle) * r * 0.8; // slight ellipse
          item.planet.style.transform = `translate(${x}px, ${y}px)`;
        });
      }
      requestAnimationFrame(loop);
    }

    // init
    planets.forEach((p,i)=> createPlanet(p,i));
    window.addEventListener('resize', layoutOrbits);
    layoutOrbits();
    requestAnimationFrame(loop);

    // click space to clear info
    space.addEventListener('click', ()=>{infoText.textContent = 'Bấm vào một hành tinh để xem chi tiết.'});

    // Accessibility: pause on blur
    window.addEventListener('blur', ()=>{running=false; playBtn.textContent='Chạy'});
    window.addEventListener('focus', ()=>{running=true; playBtn.textContent='Tạm dừng'});

    // small tip: keyboard controls
    document.addEventListener('keydown', (e)=>{
      if(e.key === ' '){ running = !running; playBtn.textContent = running ? 'Tạm dừng' : 'Chạy'; e.preventDefault(); }
      if(e.key === 'ArrowRight') speedInput.value = Math.min(3, parseFloat(speedInput.value)+0.1); speedInput.dispatchEvent(new Event('input'));
      if(e.key === 'ArrowLeft') speedInput.value = Math.max(0.1, parseFloat(speedInput.value)-0.1); speedInput.dispatchEvent(new Event('input'));
    });

  </script>
</body>
</html>
