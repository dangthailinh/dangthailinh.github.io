<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tr√≤ ch∆°i gi·∫£i ƒë·ªë sinh t·ªìn</title>
<style>
    body {
        font-family: 'Press Start 2P', sans-serif;
        background-color: #111;
        color: #fff;
        text-align: center;
        margin: 0;
        overflow: hidden;
    }

    h1 {
        color: #ffcc00;
        margin-top: 30px;
        font-size: 18px;
    }

    #game-container {
        margin-top: 20px;
    }

    #character {
        width: 150px;
        height: 150px;
        margin: 20px auto;
        background: url('character.png') center/cover no-repeat;
        border: 2px solid #555;
        border-radius: 10px;
    }

    #dialogue {
        font-size: 14px;
        color: #ff4444;
        margin-bottom: 15px;
    }

    #health-bar-container {
        width: 300px;
        height: 20px;
        background: #444;
        border: 2px solid #222;
        border-radius: 10px;
        margin: 10px auto;
    }

    #health-bar {
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #00ff00, #ffcc00);
        border-radius: 10px;
    }

    #question-box {
        margin-top: 20px;
        display: none;
    }

    .answer-btn {
        display: block;
        background: #333;
        color: white;
        border: 2px solid #666;
        padding: 10px;
        margin: 8px auto;
        width: 60%;
        border-radius: 10px;
        cursor: pointer;
        font-size: 13px;
        transition: 0.3s;
    }

    .answer-btn:hover {
        background: #555;
    }

    #timer {
        font-size: 14px;
        color: #00ffff;
        margin-top: 10px;
    }

    #return-btn {
        position: fixed;
        top: 15px;
        right: 15px;
        background: #0055ff;
        color: white;
        border: none;
        padding: 10px 14px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.3s;
    }

    #return-btn:hover {
        background: #0077ff;
    }
</style>
</head>
<body>

<h1>üé≠ Tr√≤ Ch∆°i Gi·∫£i ƒê·ªë Sinh T·ªìn üé≠</h1>

<button id="return-btn" onclick="window.location.href='game.html'">üè† Quay v·ªÅ trang ch√≠nh</button>

<div id="game-container">
    <div id="character"></div>
    <div id="dialogue">‚ÄúM√†y ph·∫£i gi·∫£i ƒë·ªë n·∫øu kh√¥ng m√†y s·∫Ω ch·∫øt!‚Äù</div>
    <div id="health-bar-container">
        <div id="health-bar"></div>
    </div>
    <button id="start-btn" class="answer-btn" onclick="startGame()">OK</button>

    <div id="question-box">
        <div id="question"></div>
        <div id="answers"></div>
        <div id="timer"></div>
    </div>
</div>

<script>
const questions = [
    { q: "Tr√°i ƒë·∫•t quay quanh g√¨?", a: ["M·∫∑t trƒÉng", "M·∫∑t tr·ªùi", "Sao H·ªèa", "Sao Kim"], correct: 1 },
    { q: "Con g√¨ bi·∫øt bay m√† kh√¥ng c√≥ c√°nh?", a: ["Gi√≥", "C√°", "Ng·ª±a", "R·∫Øn"], correct: 0 },
    { q: "1+1 b·∫±ng m·∫•y?", a: ["1", "2", "3", "4"], correct: 1 },
    { q: "Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√†?", a: ["H√† N·ªôi", "Hu·∫ø", "S√†i G√≤n", "ƒê√† N·∫µng"], correct: 0 },
    // Th√™m c√¢u h·ªèi t√πy th√≠ch...
];

let current = 0;
let health = 9;
let timer = 30;
let interval;
let score = 0;

function startGame() {
    document.getElementById("dialogue").innerText = "B·∫Øt ƒë·∫ßu gi·∫£i ƒë·ªë ƒëi... nhanh l√™n!";
    document.getElementById("start-btn").style.display = "none";
    document.getElementById("question-box").style.display = "block";
    showQuestion();
}

function showQuestion() {
    if (current >= 30 || current >= questions.length) {
        endGame(true);
        return;
    }

    const q = questions[current];
    document.getElementById("question").innerText = "‚ùì " + q.q;
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    q.a.forEach((ans, i) => {
        const btn = document.createElement("button");
        btn.classList.add("answer-btn");
        btn.innerText = ans;
        btn.onclick = () => checkAnswer(i);
        answersDiv.appendChild(btn);
    });

    timer = Math.max(30 - Math.floor(current / 5) * 15, 15);
    document.getElementById("timer").innerText = "‚è∞ Th·ªùi gian: " + timer + "s";

    clearInterval(interval);
    interval = setInterval(() => {
        timer--;
        document.getElementById("timer").innerText = "‚è∞ Th·ªùi gian: " + timer + "s";
        if (timer <= 0) {
            checkAnswer(-1);
        }
    }, 1000);
}

function checkAnswer(index) {
    const q = questions[current];
    clearInterval(interval);

    if (index === q.correct) {
        health++;
        score++;
        document.getElementById("dialogue").innerText = "‚úÖ ƒê√∫ng r·ªìi! (+1 m√°u)";
    } else {
        health -= 3;
        document.getElementById("dialogue").innerText = "‚ùå Sai r·ªìi! (-3 m√°u)";
    }

    updateHealth();

    if (health <= 0) {
        endGame(false);
        return;
    }

    current++;
    setTimeout(showQuestion, 1000);
}

function updateHealth() {
    const bar = document.getElementById("health-bar");
    const percent = Math.max(0, (health / 9) * 100);
    bar.style.width = percent + "%";
    if (percent < 30) bar.style.background = "red";
    else if (percent < 60) bar.style.background = "orange";
    else bar.style.background = "linear-gradient(90deg, #00ff00, #ffcc00)";
}

function endGame(win) {
    clearInterval(interval);
    document.getElementById("question-box").style.display = "none";
    if (win) {
        document.getElementById("dialogue").innerText = "üéâ M√†y ƒë√£ s·ªëng s√≥t! T·ªïng ƒëi·ªÉm: " + score;
    } else {
        document.getElementById("dialogue").innerText = "‚ò† M√†y ch·∫øt r·ªìi... Game Over!";
        document.getElementById("health-bar").style.width = "0%";
    }
}
</script>
</body>
</html>
