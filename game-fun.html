<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Riddle Quest — Pixel Survival</title>
<style>
  :root {
    --bg: #0b0b1a;
    --ui: #44d9e6;
    --hp-bg: #222;
    --hp-fill: #4ee085;
    --font: "Press Start 2P", monospace;
  }
  body {
    background: var(--bg);
    color: white;
    font-family: var(--font);
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    height: 100vh;
    justify-content: center;
  }
  .game-box {
    width: 600px;
    background: #111831;
    border: 3px solid #007;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 30px rgba(0,255,255,0.3);
  }
  h1 { color: var(--ui); font-size: 14px; margin-bottom: 10px; }

  /* nhân vật */
  .character {
    width: 150px;
    height: 150px;
    margin: 0 auto;
    background-image: url('character.png'); /* đổi ảnh tại đây */
    background-size: cover;
    background-position: center;
    border: 2px solid #00ffff;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,255,255,0.5);
  }

  /* HP BAR */
  .hp-bar {
    background: var(--hp-bg);
    border-radius: 6px;
    height: 14px;
    width: 200px;
    margin: 10px auto;
    border: 2px solid #000;
  }
  .hp-fill {
    background: linear-gradient(90deg, var(--hp-fill), #9be6c2);
    height: 100%;
    width: 100%;
    transition: width 0.3s;
  }

  .question-box {
    margin-top: 20px;
    background: #0c1630;
    padding: 12px;
    border-radius: 6px;
    border: 2px solid #222;
    font-size: 12px;
  }

  .answers {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-top: 12px;
  }
  .answers button {
    padding: 8px;
    background: #1d2b4a;
    border: 2px solid #007;
    color: white;
    border-radius: 5px;
    font-family: var(--font);
    font-size: 10px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .answers button:hover {
    background: #2b4e77;
    transform: scale(1.03);
  }

  .dialog {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }
  .dialog-box {
    background: #111a2f;
    border: 3px solid #00ffff;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    width: 400px;
  }
  .dialog-box p {
    font-size: 12px;
    color: #a8e0ff;
  }
  .dialog-box button {
    background: var(--ui);
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    font-family: var(--font);
    cursor: pointer;
  }

  .timer {
    margin-top: 10px;
    font-size: 12px;
    color: #ffcc00;
  }

  .end-screen {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 20;
  }
  .end-screen h2 { color: var(--ui); }
</style>
</head>
<body>
  <div class="game-box" id="game">
    <h1>RIDDLE QUEST</h1>
    <div class="character"></div>
    <div class="hp-bar"><div id="hpFill" class="hp-fill"></div></div>
    <div id="timer" class="timer">⏳ Thời gian: 30s</div>

    <div id="questionBox" class="question-box"></div>
    <div id="answers" class="answers"></div>
  </div>


<a href="game.html" 
   style="
       position: fixed;
       top: 20px;
       right: 20px;
       background-color: #ff4757;
       color: white;
       font-family: 'Press Start 2P', cursive;
       text-decoration: none;
       padding: 10px 15px;
       border-radius: 8px;
       border: 2px solid #fff;
       box-shadow: 0 0 10px #ff4757;
       transition: all 0.2s ease;
   "
   onmouseover="this.style.backgroundColor='#ff6b81'"
   onmouseout="this.style.backgroundColor='#ff4757'">
   ⬅ Quay về trang chính
</a>

  <!-- Dialog mở đầu -->
  <div id="dialog" class="dialog">
    <div class="dialog-box">
      <p>"Mày phải giải đố... nếu không mày sẽ CHẾT!"</p>
      <button id="startBtn">OK</button>
    </div>
  </div>

  <div id="endScreen" class="end-screen" style="display:none;">
    <h2 id="endMsg"></h2>
    <p id="scoreMsg"></p>
    <button onclick="location.reload()">Chơi lại</button>
  </div>

<script>
/* ---------------- CẤU HÌNH ---------------- */
const MAX_HP = 9;
const TOTAL_QUESTIONS = 30;
let hp = MAX_HP;
let currentQ = 0;
let timer = 30;
let timerInterval = null;

/* ---------------- CÂU HỎI MẪU ---------------- */
const questions = [
  { q: "Nếu 3 con mèo bắt 3 con chuột trong 3 phút, thì 100 con mèo bắt 100 con chuột trong bao lâu?", a: ["1 phút", "3 phút", "100 phút", "300 phút"], correct: 1 },
{ q: "Tôi có các thành phần: đầu, nhưng không có cổ; mắt, nhưng không có lông mày. Tôi là ai?", a: ["Con cá", "Cái kim", "Con ốc", "Cái đinh"], correct: 1 },
{ q: "Có 3 công tắc ở hành lang. Một trong số đó điều khiển một bóng đèn trong phòng kín. Bạn chỉ được vào phòng **một lần duy nhất**. Làm sao xác định công tắc nào điều khiển bóng đèn?", a: ["Không thể biết", "Bật công tắc 1 – chờ 5 phút – tắt; bật công tắc 2 – vào phòng", "Bật cả 3 – vào xem", "Dùng điện thoại quay lại"], correct: 1 },
{ q: "Một người cha nói: 'Tôi có 5 người con trai. Mỗi người con trai có 1 em gái.' Hỏi người cha có tất cả bao nhiêu người con?", a: ["6", "10", "5", "11"], correct: 0 },
{ q: "Điều gì xảy ra **một lần trong mỗi giây**, **hai lần trong mỗi khoảnh khắc**, nhưng **không bao giờ trong một thế kỷ**?", a: ["Chữ 'O'", "Chữ 'K'", "Chữ 'M'", "Chữ 'C'"], correct: 2 },
{ q: "Bạn đang tham gia cuộc đua. Bạn vượt người về nhì. Vậy bạn đang ở vị trí thứ mấy?", a: ["Nhất", "Nhì", "Ba", "Tư"], correct: 1 },
{ q: "Một người bị mù, một người bị điếc, một người bị câm. Ai trong số họ có thể nhìn thấy?", a: ["Người mù", "Người điếc", "Người câm", "Không ai"], correct: 2 },
{ q: "Có 5 chiếc máy may may 5 cái áo trong 5 phút. Hỏi 100 chiếc máy may may 100 cái áo trong bao lâu?", a: ["5 phút", "20 phút", "100 phút", "500 phút"], correct: 0 },
{ q: "Cái gì thuộc về bạn, nhưng người khác dùng nhiều hơn bạn?", a: ["Tên của bạn", "Điện thoại", "Tiền", "Quần áo"], correct: 0 },
{ q: "Một người đàn ông nhìn vào bức ảnh và nói: 'Tôi không có anh em trai, nhưng cha của người đàn ông trong ảnh là con trai của cha tôi.' Hỏi người trong ảnh là ai?", a: ["Cha anh ta", "Con trai anh ta", "Cháu trai", "Anh trai"], correct: 1 },
  { q: "Trong một bức ảnh chụp một gia đình có 2 người cha và 2 người con. Hỏi trong bức ảnh có ít nhất mấy người?", a: ["3","4","7","8"], correct: 0 },
{ q: "Cái gì luôn ở phía trước bạn nhưng bạn không bao giờ nhìn thấy?", a: ["Tương lai", "Bóng tối", "Mũi của bạn", "Cái đầu"], correct: 0 },
{ q: "Một người đi bộ từ nhà ra công viên, quãng đường 5 km. Nhưng anh ta không đi bộ, cũng không đi xe, không bay, không bơi – vậy anh ta đi bằng cách nào?", a: ["Đi ngủ", "Đi xe lăn", "Đi bằng... tưởng tượng", "Đi bằng chân"], correct: 3 },
{ q: "Con gì đập thì sống, không đập thì chết?", a: ["Con tim", "Con muỗi", "Con gà", "Con cóc"], correct: 0 },
{ q: "Cái gì bạn càng chia sẻ, bạn càng có nhiều hơn?", a: ["Tiền", "Bí mật", "Tri thức", "Bánh mì"], correct: 2 },
{ q: "Có 10 con chim đậu trên cành cây. Một người bắn chết 1 con. Hỏi còn mấy con?", a: ["9 con", "0 con", "1 con", "10 con"], correct: 1 },
{ q: "Cái gì có thể chứa nước dù đầy lỗ?", a: ["Cái xô", "Cái chậu", "Cái rổ", "Cái bọt biển"], correct: 3 },
{ q: "Cái gì bạn không mượn mà vẫn phải trả?", a: ["Lời hứa", "Nợ nần", "Lời chào", "Lời cảm ơn"], correct: 0 },
{ q: "Cái gì càng lấy ra càng to?", a: ["Cái hố", "Cái bóng", "Cái túi", "Cái lỗ"], correct: 0 },
{ q: "Một người đàn ông sống ở tầng 15 của một tòa nhà cao tầng. Mỗi sáng, ông đi thang máy xuống tầng trệt để đi làm. Tối về, nếu trời mưa hoặc có người trong thang máy, ông đi thẳng lên tầng 15. Nếu không, ông chỉ đi đến tầng 10 rồi đi bộ lên tầng 15. Vì sao?", a: ["Ông thích vận động", "Ông sợ độ cao", "Ông lùn, không với tới nút 15", "Thang máy hỏng"], correct: 2 },
{ q: "Cái gì không ai mua mà vẫn có, không ai bán mà vẫn mất?", a: ["Thời gian", "Danh tiếng", "Tuổi tác", "Sức khỏe"], correct: 2 }
  

];

/* Tạo 30 câu từ danh sách ngẫu nhiên */
let quiz = [];
for(let i=0;i<TOTAL_QUESTIONS;i++){
  quiz.push(questions[i % questions.length]);
}

/* ---------------- ELEMENT ---------------- */
const hpFill = document.getElementById("hpFill");
const questionBox = document.getElementById("questionBox");
const answersDiv = document.getElementById("answers");
const timerEl = document.getElementById("timer");
const dialog = document.getElementById("dialog");
const endScreen = document.getElementById("endScreen");
const endMsg = document.getElementById("endMsg");
const scoreMsg = document.getElementById("scoreMsg");

/* ---------------- HÀM CHÍNH ---------------- */
function startGame(){
  dialog.style.display = "none";
  currentQ = 0;
  hp = MAX_HP;
  nextQuestion();
}

/* Hiển thị câu hỏi */
function nextQuestion(){
  if(hp <= 0){ return endGame(false); }
  if(currentQ >= TOTAL_QUESTIONS){ return endGame(true); }

  const q = quiz[currentQ];
  questionBox.textContent = (currentQ+1) + ". " + q.q;
  answersDiv.innerHTML = "";
  q.a.forEach((ans, i)=>{
    const btn = document.createElement("button");
    btn.textContent = ans;
    btn.onclick = ()=>answer(i);
    answersDiv.appendChild(btn);
  });

  updateHP();
  resetTimer();
}

/* Khi trả lời */
function answer(choice){
  const q = quiz[currentQ];
  clearInterval(timerInterval);
  if(choice === q.correct){
    hp = Math.min(MAX_HP, hp + 1);
  } else {
    hp -= 3;
  }
  currentQ++;
  setTimeout(nextQuestion, 400);
}

/* Cập nhật HP */
function updateHP(){
  const percent = (hp / MAX_HP) * 100;
  hpFill.style.width = percent + "%";
  if(percent < 40) hpFill.style.background = "#ff4d4d";
  else hpFill.style.background = "linear-gradient(90deg, var(--hp-fill), #9be6c2)";
}

/* Đồng hồ đếm ngược */
function resetTimer(){
  clearInterval(timerInterval);
  let timeLeft = timer;
  timerEl.textContent = "⏳ Thời gian: " + timeLeft + "s";
  timerInterval = setInterval(()=>{
    timeLeft--;
    timerEl.textContent = "⏳ Thời gian: " + timeLeft + "s";
    if(timeLeft <= 0){
      clearInterval(timerInterval);
      hp -= 3;
      currentQ++;
      nextQuestion();
    }
  }, 1000);

  // giảm thời gian mỗi 5 câu
  if((currentQ+1) % 5 === 0 && timer > 15){
    timer -= 3;
  }
}

/* Kết thúc game */
function endGame(win){
  clearInterval(timerInterval);
  endScreen.style.display = "flex";
  if(win){
    endMsg.textContent = "🎉 YOU WIN!";
  } else {
    endMsg.textContent = "☠ GAME OVER ☠";
  }
  scoreMsg.textContent = "Số câu đã trả lời đúng: " + currentQ + "/" + TOTAL_QUESTIONS;
}

/* ---------------- SỰ KIỆN ---------------- */
document.getElementById("startBtn").onclick = startGame;
</script>
</body>
</html>

