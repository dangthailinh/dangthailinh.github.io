<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Riddle Quest ‚Äî Pixel Survival</title>
<style>
  :root {
    --bg: #0b0b1a;
    --ui: #44d9e6;
    --hp-bg: #222;
    --hp-fill: #4ee085;
    --font: "Press Start 2P", monospace;
  }
  body {
    background: var(--bg);
    color: white;
    font-family: var(--font);
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    height: 100vh;
    justify-content: center;
  }
  .game-box {
    width: 600px;
    background: #111831;
    border: 3px solid #007;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 30px rgba(0,255,255,0.3);
  }
  h1 { color: var(--ui); font-size: 14px; margin-bottom: 10px; }

  /* nh√¢n v·∫≠t */
  .character {
    width: 150px;
    height: 150px;
    margin: 0 auto;
    background-image: url('character.png'); /* ƒë·ªïi ·∫£nh t·∫°i ƒë√¢y */
    background-size: cover;
    background-position: center;
    border: 2px solid #00ffff;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,255,255,0.5);
  }

  /* HP BAR */
  .hp-bar {
    background: var(--hp-bg);
    border-radius: 6px;
    height: 14px;
    width: 200px;
    margin: 10px auto;
    border: 2px solid #000;
  }
  .hp-fill {
    background: linear-gradient(90deg, var(--hp-fill), #9be6c2);
    height: 100%;
    width: 100%;
    transition: width 0.3s;
  }

  .question-box {
    margin-top: 20px;
    background: #0c1630;
    padding: 12px;
    border-radius: 6px;
    border: 2px solid #222;
    font-size: 12px;
  }

  .answers {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-top: 12px;
  }
  .answers button {
    padding: 8px;
    background: #1d2b4a;
    border: 2px solid #007;
    color: white;
    border-radius: 5px;
    font-family: var(--font);
    font-size: 10px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .answers button:hover {
    background: #2b4e77;
    transform: scale(1.03);
  }

  .dialog {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }
  .dialog-box {
    background: #111a2f;
    border: 3px solid #00ffff;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    width: 400px;
  }
  .dialog-box p {
    font-size: 12px;
    color: #a8e0ff;
  }
  .dialog-box button {
    background: var(--ui);
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    font-family: var(--font);
    cursor: pointer;
  }

  .timer {
    margin-top: 10px;
    font-size: 12px;
    color: #ffcc00;
  }

  .end-screen {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 20;
  }
  .end-screen h2 { color: var(--ui); }
</style>
</head>
<body>
  <div class="game-box" id="game">
    <h1>RIDDLE QUEST</h1>
    <div class="character"></div>
    <div class="hp-bar"><div id="hpFill" class="hp-fill"></div></div>
    <div id="timer" class="timer">‚è≥ Th·ªùi gian: 30s</div>

    <div id="questionBox" class="question-box"></div>
    <div id="answers" class="answers"></div>
  </div>


<a href="game.html" 
   style="
       position: fixed;
       top: 20px;
       right: 20px;
       background-color: #ff4757;
       color: white;
       font-family: 'Press Start 2P', cursive;
       text-decoration: none;
       padding: 10px 15px;
       border-radius: 8px;
       border: 2px solid #fff;
       box-shadow: 0 0 10px #ff4757;
       transition: all 0.2s ease;
   "
   onmouseover="this.style.backgroundColor='#ff6b81'"
   onmouseout="this.style.backgroundColor='#ff4757'">
   ‚¨Ö Quay v·ªÅ trang ch√≠nh
</a>

  <!-- Dialog m·ªü ƒë·∫ßu -->
  <div id="dialog" class="dialog">
    <div class="dialog-box">
      <p>"M√†y ph·∫£i gi·∫£i ƒë·ªë... n·∫øu kh√¥ng m√†y s·∫Ω CH·∫æT!"</p>
      <button id="startBtn">OK</button>
    </div>
  </div>

  <div id="endScreen" class="end-screen" style="display:none;">
    <h2 id="endMsg"></h2>
    <p id="scoreMsg"></p>
    <button onclick="location.reload()">Ch∆°i l·∫°i</button>
  </div>

<script>
/* ---------------- C·∫§U H√åNH ---------------- */
const MAX_HP = 9;
const TOTAL_QUESTIONS = 30;
let hp = MAX_HP;
let currentQ = 0;
let timer = 30;
let timerInterval = null;

/* ---------------- C√ÇU H·ªéI M·∫™U ---------------- */
const questions = [
  { q: "N·∫øu 3 con m√®o b·∫Øt 3 con chu·ªôt trong 3 ph√∫t, th√¨ 100 con m√®o b·∫Øt 100 con chu·ªôt trong bao l√¢u?", a: ["1 ph√∫t", "3 ph√∫t", "100 ph√∫t", "300 ph√∫t"], correct: 1 },
{ q: "T√¥i c√≥ c√°c th√†nh ph·∫ßn: ƒë·∫ßu, nh∆∞ng kh√¥ng c√≥ c·ªï; m·∫Øt, nh∆∞ng kh√¥ng c√≥ l√¥ng m√†y. T√¥i l√† ai?", a: ["Con c√°", "C√°i kim", "Con ·ªëc", "C√°i ƒëinh"], correct: 1 },
{ q: "C√≥ 3 c√¥ng t·∫Øc ·ªü h√†nh lang. M·ªôt trong s·ªë ƒë√≥ ƒëi·ªÅu khi·ªÉn m·ªôt b√≥ng ƒë√®n trong ph√≤ng k√≠n. B·∫°n ch·ªâ ƒë∆∞·ª£c v√†o ph√≤ng **m·ªôt l·∫ßn duy nh·∫•t**. L√†m sao x√°c ƒë·ªãnh c√¥ng t·∫Øc n√†o ƒëi·ªÅu khi·ªÉn b√≥ng ƒë√®n?", a: ["Kh√¥ng th·ªÉ bi·∫øt", "B·∫≠t c√¥ng t·∫Øc 1 ‚Äì ch·ªù 5 ph√∫t ‚Äì t·∫Øt; b·∫≠t c√¥ng t·∫Øc 2 ‚Äì v√†o ph√≤ng", "B·∫≠t c·∫£ 3 ‚Äì v√†o xem", "D√πng ƒëi·ªán tho·∫°i quay l·∫°i"], correct: 1 },
{ q: "M·ªôt ng∆∞·ªùi cha n√≥i: 'T√¥i c√≥ 5 ng∆∞·ªùi con trai. M·ªói ng∆∞·ªùi con trai c√≥ 1 em g√°i.' H·ªèi ng∆∞·ªùi cha c√≥ t·∫•t c·∫£ bao nhi√™u ng∆∞·ªùi con?", a: ["6", "10", "5", "11"], correct: 0 },
{ q: "ƒêi·ªÅu g√¨ x·∫£y ra **m·ªôt l·∫ßn trong m·ªói gi√¢y**, **hai l·∫ßn trong m·ªói kho·∫£nh kh·∫Øc**, nh∆∞ng **kh√¥ng bao gi·ªù trong m·ªôt th·∫ø k·ª∑**?", a: ["Ch·ªØ 'O'", "Ch·ªØ 'K'", "Ch·ªØ 'M'", "Ch·ªØ 'C'"], correct: 2 },
{ q: "B·∫°n ƒëang tham gia cu·ªôc ƒëua. B·∫°n v∆∞·ª£t ng∆∞·ªùi v·ªÅ nh√¨. V·∫≠y b·∫°n ƒëang ·ªü v·ªã tr√≠ th·ª© m·∫•y?", a: ["Nh·∫•t", "Nh√¨", "Ba", "T∆∞"], correct: 1 },
{ q: "M·ªôt ng∆∞·ªùi b·ªã m√π, m·ªôt ng∆∞·ªùi b·ªã ƒëi·∫øc, m·ªôt ng∆∞·ªùi b·ªã c√¢m. Ai trong s·ªë h·ªç c√≥ th·ªÉ nh√¨n th·∫•y?", a: ["Ng∆∞·ªùi m√π", "Ng∆∞·ªùi ƒëi·∫øc", "Ng∆∞·ªùi c√¢m", "Kh√¥ng ai"], correct: 2 },
{ q: "C√≥ 5 chi·∫øc m√°y may may 5 c√°i √°o trong 5 ph√∫t. H·ªèi 100 chi·∫øc m√°y may may 100 c√°i √°o trong bao l√¢u?", a: ["5 ph√∫t", "20 ph√∫t", "100 ph√∫t", "500 ph√∫t"], correct: 0 },
{ q: "C√°i g√¨ thu·ªôc v·ªÅ b·∫°n, nh∆∞ng ng∆∞·ªùi kh√°c d√πng nhi·ªÅu h∆°n b·∫°n?", a: ["T√™n c·ªßa b·∫°n", "ƒêi·ªán tho·∫°i", "Ti·ªÅn", "Qu·∫ßn √°o"], correct: 0 },
{ q: "M·ªôt ng∆∞·ªùi ƒë√†n √¥ng nh√¨n v√†o b·ª©c ·∫£nh v√† n√≥i: 'T√¥i kh√¥ng c√≥ anh em trai, nh∆∞ng cha c·ªßa ng∆∞·ªùi ƒë√†n √¥ng trong ·∫£nh l√† con trai c·ªßa cha t√¥i.' H·ªèi ng∆∞·ªùi trong ·∫£nh l√† ai?", a: ["Cha anh ta", "Con trai anh ta", "Ch√°u trai", "Anh trai"], correct: 1 },
  { q: "Trong m·ªôt b·ª©c ·∫£nh ch·ª•p m·ªôt gia ƒë√¨nh c√≥ 2 ng∆∞·ªùi cha v√† 2 ng∆∞·ªùi con. H·ªèi trong b·ª©c ·∫£nh c√≥ √≠t nh·∫•t m·∫•y ng∆∞·ªùi?", a: ["3","4","7","8"], correct: 0 },
{ q: "C√°i g√¨ lu√¥n ·ªü ph√≠a tr∆∞·ªõc b·∫°n nh∆∞ng b·∫°n kh√¥ng bao gi·ªù nh√¨n th·∫•y?", a: ["T∆∞∆°ng lai", "B√≥ng t·ªëi", "M≈©i c·ªßa b·∫°n", "C√°i ƒë·∫ßu"], correct: 0 },
{ q: "M·ªôt ng∆∞·ªùi ƒëi b·ªô t·ª´ nh√† ra c√¥ng vi√™n, qu√£ng ƒë∆∞·ªùng 5 km. Nh∆∞ng anh ta kh√¥ng ƒëi b·ªô, c≈©ng kh√¥ng ƒëi xe, kh√¥ng bay, kh√¥ng b∆°i ‚Äì v·∫≠y anh ta ƒëi b·∫±ng c√°ch n√†o?", a: ["ƒêi ng·ªß", "ƒêi xe lƒÉn", "ƒêi b·∫±ng... t∆∞·ªüng t∆∞·ª£ng", "ƒêi b·∫±ng ch√¢n"], correct: 3 },
{ q: "Con g√¨ ƒë·∫≠p th√¨ s·ªëng, kh√¥ng ƒë·∫≠p th√¨ ch·∫øt?", a: ["Con tim", "Con mu·ªói", "Con g√†", "Con c√≥c"], correct: 0 },
{ q: "C√°i g√¨ b·∫°n c√†ng chia s·∫ª, b·∫°n c√†ng c√≥ nhi·ªÅu h∆°n?", a: ["Ti·ªÅn", "B√≠ m·∫≠t", "Tri th·ª©c", "B√°nh m√¨"], correct: 2 },
{ q: "C√≥ 10 con chim ƒë·∫≠u tr√™n c√†nh c√¢y. M·ªôt ng∆∞·ªùi b·∫Øn ch·∫øt 1 con. H·ªèi c√≤n m·∫•y con?", a: ["9 con", "0 con", "1 con", "10 con"], correct: 1 },
{ q: "C√°i g√¨ c√≥ th·ªÉ ch·ª©a n∆∞·ªõc d√π ƒë·∫ßy l·ªó?", a: ["C√°i x√¥", "C√°i ch·∫≠u", "C√°i r·ªï", "C√°i b·ªçt bi·ªÉn"], correct: 3 },
{ q: "C√°i g√¨ b·∫°n kh√¥ng m∆∞·ª£n m√† v·∫´n ph·∫£i tr·∫£?", a: ["L·ªùi h·ª©a", "N·ª£ n·∫ßn", "L·ªùi ch√†o", "L·ªùi c·∫£m ∆°n"], correct: 0 },
{ q: "C√°i g√¨ c√†ng l·∫•y ra c√†ng to?", a: ["C√°i h·ªë", "C√°i b√≥ng", "C√°i t√∫i", "C√°i l·ªó"], correct: 0 },
{ q: "M·ªôt ng∆∞·ªùi ƒë√†n √¥ng s·ªëng ·ªü t·∫ßng 15 c·ªßa m·ªôt t√≤a nh√† cao t·∫ßng. M·ªói s√°ng, √¥ng ƒëi thang m√°y xu·ªëng t·∫ßng tr·ªát ƒë·ªÉ ƒëi l√†m. T·ªëi v·ªÅ, n·∫øu tr·ªùi m∆∞a ho·∫∑c c√≥ ng∆∞·ªùi trong thang m√°y, √¥ng ƒëi th·∫≥ng l√™n t·∫ßng 15. N·∫øu kh√¥ng, √¥ng ch·ªâ ƒëi ƒë·∫øn t·∫ßng 10 r·ªìi ƒëi b·ªô l√™n t·∫ßng 15. V√¨ sao?", a: ["√îng th√≠ch v·∫≠n ƒë·ªông", "√îng s·ª£ ƒë·ªô cao", "√îng l√πn, kh√¥ng v·ªõi t·ªõi n√∫t 15", "Thang m√°y h·ªèng"], correct: 2 },
{ q: "C√°i g√¨ kh√¥ng ai mua m√† v·∫´n c√≥, kh√¥ng ai b√°n m√† v·∫´n m·∫•t?", a: ["Th·ªùi gian", "Danh ti·∫øng", "Tu·ªïi t√°c", "S·ª©c kh·ªèe"], correct: 2 }
  

];

/* T·∫°o 30 c√¢u t·ª´ danh s√°ch ng·∫´u nhi√™n */
let quiz = [];
for(let i=0;i<TOTAL_QUESTIONS;i++){
  quiz.push(questions[i % questions.length]);
}

/* ---------------- ELEMENT ---------------- */
const hpFill = document.getElementById("hpFill");
const questionBox = document.getElementById("questionBox");
const answersDiv = document.getElementById("answers");
const timerEl = document.getElementById("timer");
const dialog = document.getElementById("dialog");
const endScreen = document.getElementById("endScreen");
const endMsg = document.getElementById("endMsg");
const scoreMsg = document.getElementById("scoreMsg");

/* ---------------- H√ÄM CH√çNH ---------------- */
function startGame(){
  dialog.style.display = "none";
  currentQ = 0;
  hp = MAX_HP;
  nextQuestion();
}

/* Hi·ªÉn th·ªã c√¢u h·ªèi */
function nextQuestion(){
  if(hp <= 0){ return endGame(false); }
  if(currentQ >= TOTAL_QUESTIONS){ return endGame(true); }

  const q = quiz[currentQ];
  questionBox.textContent = (currentQ+1) + ". " + q.q;
  answersDiv.innerHTML = "";
  q.a.forEach((ans, i)=>{
    const btn = document.createElement("button");
    btn.textContent = ans;
    btn.onclick = ()=>answer(i);
    answersDiv.appendChild(btn);
  });

  updateHP();
  resetTimer();
}

/* Khi tr·∫£ l·ªùi */
function answer(choice){
  const q = quiz[currentQ];
  clearInterval(timerInterval);
  if(choice === q.correct){
    hp = Math.min(MAX_HP, hp + 1);
  } else {
    hp -= 3;
  }
  currentQ++;
  setTimeout(nextQuestion, 400);
}

/* C·∫≠p nh·∫≠t HP */
function updateHP(){
  const percent = (hp / MAX_HP) * 100;
  hpFill.style.width = percent + "%";
  if(percent < 40) hpFill.style.background = "#ff4d4d";
  else hpFill.style.background = "linear-gradient(90deg, var(--hp-fill), #9be6c2)";
}

/* ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c */
function resetTimer(){
  clearInterval(timerInterval);
  let timeLeft = timer;
  timerEl.textContent = "‚è≥ Th·ªùi gian: " + timeLeft + "s";
  timerInterval = setInterval(()=>{
    timeLeft--;
    timerEl.textContent = "‚è≥ Th·ªùi gian: " + timeLeft + "s";
    if(timeLeft <= 0){
      clearInterval(timerInterval);
      hp -= 3;
      currentQ++;
      nextQuestion();
    }
  }, 1000);

  // gi·∫£m th·ªùi gian m·ªói 5 c√¢u
  if((currentQ+1) % 5 === 0 && timer > 15){
    timer -= 3;
  }
}

/* K·∫øt th√∫c game */
function endGame(win){
  clearInterval(timerInterval);
  endScreen.style.display = "flex";
  if(win){
    endMsg.textContent = "üéâ YOU WIN!";
  } else {
    endMsg.textContent = "‚ò† GAME OVER ‚ò†";
  }
  scoreMsg.textContent = "S·ªë c√¢u ƒë√£ tr·∫£ l·ªùi ƒë√∫ng: " + currentQ + "/" + TOTAL_QUESTIONS;
}

/* ---------------- S·ª∞ KI·ªÜN ---------------- */
document.getElementById("startBtn").onclick = startGame;
</script>
</body>
</html>

